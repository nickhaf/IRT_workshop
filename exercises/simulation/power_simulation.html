<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Stichprobenplanung durch Simulation: Vorbereitung – IRT</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../exercises/simulation/loop.html" rel="next">
<link href="../../exercises/index_simulation.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
</head>
<body class="nav-sidebar floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">IRT</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Suchen"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Navigation umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../slides/index.html"> 
<span class="menu-text">Folien</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../exercises/index.html" aria-current="page"> 
<span class="menu-text">Übungen</span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../exercises/index.html">Übungen</a></li><li class="breadcrumb-item"><a href="../../exercises/index_simulation.html">Simulation zur Stichprobenplanung</a></li><li class="breadcrumb-item"><a href="../../exercises/simulation/power_simulation.html">Stichprobenplanung durch Simulation: Vorbereitung</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Suchen" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../exercises/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Übungen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/index_1pl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Einfache IRT Modelle</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../exercises/index_intro_r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Einführung in R</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/intro_r/load_data_ex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Einlesen von Daten</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/intro_r/subsetting_ex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Subsetting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/intro_r/missings_ex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Missings</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/intro_r/reshaping_ex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reshaping</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/intro_r/merging_ex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Merging</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/index_glmm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Raschmodell als GLMM</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../exercises/index_linking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Linking</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/linking/data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Die Daten</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/linking/linking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Linking</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/linking/dif.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3. Differential Item Functioning</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/index_testdesign.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Testdesigns</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../exercises/index_xPL.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Höher parametrisierte Modelle</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/xPl/simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Simulation von IRT Daten</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/xPl/model_selection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modellselektion</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/xPl/pcm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Partial Credit Model</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/index_laengs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Längsschnitt</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../exercises/index_simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Simulation zur Stichprobenplanung</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/simulation/power_simulation.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Stichprobenplanung durch Simulation: Vorbereitung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exercises/simulation/loop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stichprobenplanung durch Simulation: for-loop</span></a>
  </div>
</li>
      </ul>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Auf dieser Seite</h2>
   
  <ul>
<li>
<a href="#das-grundger%C3%BCst" id="toc-das-grundgerüst" class="nav-link active" data-scroll-target="#das-grundger%C3%BCst"><span class="header-section-number">1</span> Das Grundgerüst</a>
  <ul class="collapse">
<li><a href="#die-items" id="toc-die-items" class="nav-link" data-scroll-target="#die-items"><span class="header-section-number">1.1</span> Die Items</a></li>
  <li><a href="#die-antworten" id="toc-die-antworten" class="nav-link" data-scroll-target="#die-antworten"><span class="header-section-number">1.2</span> Die Antworten</a></li>
  <li><a href="#das-modell" id="toc-das-modell" class="nav-link" data-scroll-target="#das-modell"><span class="header-section-number">1.3</span> Das Modell</a></li>
  <li><a href="#der-vergleich" id="toc-der-vergleich" class="nav-link" data-scroll-target="#der-vergleich"><span class="header-section-number">1.4</span> Der Vergleich</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><div class="quarto-about-marquee">
  <div class="about-image-container">
    <img src="images/surf.jpg" class="about-image " style="width: 100%;">
  </div>
  <div class="about-contents">
    <header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../exercises/index.html">Übungen</a></li><li class="breadcrumb-item"><a href="../../exercises/index_simulation.html">Simulation zur Stichprobenplanung</a></li><li class="breadcrumb-item"><a href="../../exercises/simulation/power_simulation.html">Stichprobenplanung durch Simulation: Vorbereitung</a></li></ol></nav><div class="quarto-title">
<h1 class="title">Stichprobenplanung durch Simulation: Vorbereitung</h1>
<p class="subtitle lead">Übung</p>
</div>
<div class="quarto-title-meta">
  </div>
</header> <div id="sim-heading">
<p>In dieser Übung wollen wir das Gründgerüst für die Simulation legen, indem wir erst einmal ohne Wiederholung ein Datensatz simulieren. Vieles wird dir vermutlich schon aus der Simulationsübung zu [Höher Parametrisierten Modellen] bekannt vorkommen.</p>
</div> 
  </div>
</div>


<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>Foto von <a href="https://unsplash.com/de/@markusspiske?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash">Markus Spiske</a> auf <a href="https://unsplash.com/de/fotos/ein-mann-reitet-auf-einer-welle-auf-einem-surfbrett-Xr0vgXXZ91A?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash">Unsplash</a></p>
</div></div><div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Benötigte Pakete
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://www.edmeasurementsurveys.com/TAM/Tutorials/">TAM</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/swnydick/catIrt">catIrt</a></span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<section id="das-grundgerüst" class="level1" data-number="1"><h1 data-number="1">
<span class="header-section-number">1</span> Das Grundgerüst</h1>
<p>Als erstes wollen wir Schritt für Schritt das Grundgerüst für unsere Simulation aufbauen, das wir dann je nach Fragestellung erweitern können.</p>
<section id="die-items" class="level2" data-number="1.1"><h2 data-number="1.1" data-anchor-id="die-items">
<span class="header-section-number">1.1</span> Die Items</h2>
<p>Als erstes definieren wir unsere wahren Itemparameter, aus denen dann die Daten simuliert werden.<br>
Erstelle dafür einen <code>data.frame</code>, der pro Item eine Zeile mit den entsprechenden Itemparamtern <span class="math inline">\(\alpha\)</span>, <span class="math inline">\(\beta\)</span> und <span class="math inline">\(\gamma\)</span> enthält.</p>
<ul>
<li>Wir wollen 20 Items simulieren.</li>
<li>
<span class="math inline">\(\alpha\)</span> ist der Diskriminationsparameter und soll aus einer Normalverteilung <span class="math inline">\(N(1, 0.1)\)</span> simuliert werden. So ist er noch klein genug, um ein sinnvolles 1PL-Modell ausprobieren zu können.</li>
<li>
<span class="math inline">\(\beta\)</span> ist der Schwierigkeitsparameter und soll den gesamten erwartete Schwierigkeitsbereich abdecken. Die Range soll von -2 bis 2 gehen, und Itemschwierigkeiten in gleichmäßigen Abständen enthalten.</li>
<li>
<span class="math inline">\(\gamma\)</span> ist der Rate-Parameter, und wird für alle Items auf 0 gesetzt.</li>
</ul>
<p>1PL und 2PL Modelle sollten hier also beide gut funktionieren.</p>
<div class="callout callout-style-simple callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tipp
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Aus einer Normalverteilung können wir mit <code><a href="https://rdrr.io/r/stats/Normal.html">rnorm()</a></code> samplen.<br>
Die Schwierigkeitsparamter lassen sich mit <code><a href="https://rdrr.io/r/base/seq.html">seq()</a></code> erzeugen.<br>
Schaue dir gegebenenfalls die Hilfen an.</p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Lösung
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span> <span class="co">## Setze den gleichen Seed, um exakt die selben Ergebnisse zu bekommen</span></span>
<span></span>
<span><span class="va">n_items</span> <span class="op">&lt;-</span> <span class="fl">20</span> <span class="co">## So kann ich die Itemzahl im Nachhinein leicht anpassen</span></span>
<span><span class="va">n_sub</span> <span class="op">&lt;-</span> <span class="fl">500</span></span>
<span></span>
<span><span class="va">item_pars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  item_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">n_items</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">n_items</span>, <span class="fl">1</span>, <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>  beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">2</span>, length.out <span class="op">=</span> <span class="va">n_items</span><span class="op">)</span>,</span>
<span>  gamma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">n_items</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section><section id="die-antworten" class="level2" data-number="1.2"><h2 data-number="1.2" data-anchor-id="die-antworten">
<span class="header-section-number">1.2</span> Die Antworten</h2>
<p>Perfekt, jetzt können wir die Antworten simulieren. Nutze dafür diesmal die Funktion <code>simIRT()</code> aus <code>catIrt</code>. Andere Pakete wie <code>mirt</code> haben aber äquivalente Funktionen, und wir haben ja sogar schon <a href="">gelernt</a>, wie man das ganz manuell machen kann.</p>
<p>Wir müssen neben den Parametern auch die <span class="math inline">\(\theta\)</span>-Werte angeben. Diese sollen aus einer Normalverteilung <span class="math inline">\(N(0,1)\)</span> stammen. Hier haben wir natürlich Spielraum: Wenn wir erwarten, dass die Stichprobe, die wir untersuchen wollen, besonders leistungsstark ist, könnten wir auch eine Normalverteilung mit höherem Mittelwert wählen.</p>
<p>Wir simulieren in diesem ersten Schritt <span class="math inline">\(\theta\)</span>-Werte für <code>n_sub</code> Personen. Später variieren wir das natürlich, um mehrere Möglichkeiten auszuprobieren.</p>
<div class="callout callout-style-simple callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tipp
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Die Parameter müssen als <a href="https://nickhaf.github.io/IRT_workshop/slides/IntroR/introR.html#/datenstrukturen"><code>Matrix</code></a> dem Funktionsargument <code>params</code> an <code><a href="https://rdrr.io/pkg/catIrt/man/simIrt.html">simIrt()</a></code> übergeben werden.</p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Lösung
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">n_subj</span> <span class="op">&lt;-</span> <span class="fl">500</span></span>
<span></span>
<span><span class="va">sim_2PL_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/catIrt/man/simIrt.html">simIrt</a></span><span class="op">(</span></span>
<span>  theta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">n_subj</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">item_pars</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"alpha"</span>, <span class="st">"beta"</span>, <span class="st">"gamma"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  mod <span class="op">=</span> <span class="st">"brm"</span></span>
<span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Binary response model simulation:
    500  simulees,  20  items</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="das-modell" class="level2" data-number="1.3"><h2 data-number="1.3" data-anchor-id="das-modell">
<span class="header-section-number">1.3</span> Das Modell</h2>
<p>Jetzt können wir das Modell schätzen. Wir geben uns jetzt erst einmal mit einem 1PL-Modell zufrieden. Fitte also ein 1PL-Modell auf die simulierten Daten (z.B. mit <code>TAM</code>).</p>
<div class="callout callout-style-simple callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tipp
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Um an die simulierten Antworten zu kommen, können wir uns einmal die Struktur von dem simulierten Objekt anschauen:</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">sim_2PL_dat</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 3
 $ resp  : num [1:500, 1:20] 0 1 1 1 1 1 1 0 0 1 ...
 $ params: 'brm' num [1:20, 1:4] 1 2 3 4 5 6 7 8 9 10 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:4] "item" "a" "b" "c"
 $ theta : num [1:500] -0.307 -1.781 -0.172 1.215 1.895 ...</code></pre>
</div>
</div>
<p>Die responses können wir also mit <code>sim_2PL_dat$resp</code> extrahieren.</p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Lösung
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tam_1PL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/TAM/man/tam.mml.html">tam</a></span><span class="op">(</span><span class="va">sim_2PL_dat</span><span class="op">$</span><span class="va">resp</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section><section id="der-vergleich" class="level2" data-number="1.4"><h2 data-number="1.4" data-anchor-id="der-vergleich">
<span class="header-section-number">1.4</span> Der Vergleich</h2>
<p>Jetzt können wir unsere tatsächlichen Schwierigkeitsparameter mit den duch <code>TAM</code> geschätzten Schwierigkeitsparamtern vergleichen. Mach das einmal indem du die Differenz bildest. Fällt dir etwas auf?</p>
<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>Obwohl wir eigentlich ein 2PL Modell simuliert haben (wir haben ja Diskriminationsparamter verschieden von 1 gezogen), haben wir nur ein 1PL Modell gefittet. Das dient einfach dazu zu zeigen, dass die Modellschätzung in Fällen, in denen die Diskriminationsparamter nicht zu verschieden von 1 sind, hinreichend gut funktionieren kann. In echten Daten werden die Diskriminationsparamter ja auch nie 1 sein, deshalb können wir so mal schauen, wie sich unser Modell unter dieser Annahme von geringen Abweichungen von 1 verhält.</p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tipp
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Der Output von <code>TAM</code> ist ziemlich groß. Beim Anschauen der Struktur sehen wir nach einigem Suchen, dass die Paramter sich wahrscheinlich in <code>tam_1PL$item_irt</code> verstecken:</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">tam_1PL</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 57
 $ xsi                :'data.frame':    20 obs. of  2 variables:
  ..$ xsi   : num [1:20] -2.41 -1.54 -1.58 -1.45 -1.08 ...
  ..$ se.xsi: num [1:20] 0.149 0.118 0.119 0.115 0.108 ...
 $ beta               : num [1, 1] 0
 $ variance           : num [1, 1] 1
 $ item               :'data.frame':    20 obs. of  6 variables:
  ..$ item       : chr [1:20] "I1" "I2" "I3" "I4" ...
  ..$ N          : num [1:20] 500 500 500 500 500 500 500 500 500 500 ...
  ..$ M          : num [1:20] 0.886 0.784 0.79 0.772 0.712 0.68 0.642 0.606 0.53 0.536 ...
  ..$ xsi.item   : num [1:20] -2.41 -1.54 -1.58 -1.45 -1.08 ...
  ..$ AXsi_.Cat1 : num [1:20] -2.41 -1.54 -1.58 -1.45 -1.08 ...
  ..$ B.Cat1.Dim1: num [1:20] 1 1 1 1 1 1 1 1 1 1 ...
 $ item_irt           :'data.frame':    20 obs. of  3 variables:
  ..$ item : chr [1:20] "I1" "I2" "I3" "I4" ...
  ..$ alpha: num [1:20] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ beta : num [1:20] -2.41 -1.54 -1.58 -1.45 -1.08 ...
 $ person             :'data.frame':    500 obs. of  7 variables:
  ..$ pid    : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ case   : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ pweight: num [1:500] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ score  : num [1:500] 6 5 12 17 17 9 6 3 14 8 ...
  ..$ max    : num [1:500] 20 20 20 20 20 20 20 20 20 20 ...
  ..$ EAP    : num [1:500] -0.878 -1.112 0.428 1.601 1.601 ...
  ..$ SD.EAP : num [1:500] 0.479 0.489 0.466 0.515 0.515 ...
 $ pid                : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
 $ EAP.rel            : num 0.771
 $ post               : num [1:500, 1:21] 9.68e-18 1.44e-15 8.36e-33 5.40e-48 5.40e-48 ...
 $ rprobs             : num [1:20, 1:2, 1:21] 0.973 0.989 0.988 0.989 0.993 ...
 $ itemweight         : num [1:21, 1:20] 6.51e-06 1.86e-04 3.55e-03 4.40e-02 3.52e-01 ...
 $ theta              : num [1:21, 1] -6 -5.4 -4.8 -4.2 -3.6 ...
 $ n.ik               : num [1:21, 1:20, 1:2, 1] 6.45e-06 1.83e-04 3.42e-03 4.09e-02 2.99e-01 ...
 $ pi.k               : num [1:21, 1] 1.30e-08 3.72e-07 7.10e-06 8.81e-05 7.04e-04 ...
 $ Y                  : num [1:500, 1] 1 1 1 1 1 1 1 1 1 1 ...
 $ resp               : num [1:500, 1:20] 0 1 1 1 1 1 1 0 0 1 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:20] "I1" "I2" "I3" "I4" ...
 $ resp.ind           : num [1:500, 1:20] 1 1 1 1 1 1 1 1 1 1 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:20] "I1" "I2" "I3" "I4" ...
 $ group              : NULL
 $ G                  : num 1
 $ groups             : num 1
 $ formulaY           : NULL
 $ dataY              : NULL
 $ pweights           : num [1:500] 1 1 1 1 1 1 1 1 1 1 ...
 $ time               : POSIXct[1:2], format: "2024-10-21 10:49:11" "2024-10-21 10:49:11"
 $ A                  : num [1:20, 1:2, 1:20] 0 0 0 0 0 0 0 0 0 0 ...
  ..- attr(*, "dimnames")=List of 3
  .. ..$ : chr [1:20] "Item01" "Item02" "Item03" "Item04" ...
  .. ..$ : chr [1:2] "Category0" "Category1"
  .. ..$ : chr [1:20] "I1" "I2" "I3" "I4" ...
 $ B                  : num [1:20, 1:2, 1] 0 0 0 0 0 0 0 0 0 0 ...
  ..- attr(*, "dimnames")=List of 3
  .. ..$ : chr [1:20] "I1" "I2" "I3" "I4" ...
  .. ..$ : chr [1:2] "Cat0" "Cat1"
  .. ..$ : chr "Dim01"
 $ se.B               : num [1:20, 1:2, 1] 0 0 0 0 0 0 0 0 0 0 ...
  ..- attr(*, "dimnames")=List of 3
  .. ..$ : chr [1:20] "I1" "I2" "I3" "I4" ...
  .. ..$ : chr [1:2] "Cat0" "Cat1"
  .. ..$ : chr "Dim01"
 $ nitems             : int 20
 $ maxK               : num 2
 $ AXsi               : num [1:20, 1:2] 0 0 0 0 0 0 0 0 0 0 ...
 $ AXsi_              : num [1:20, 1:2] 0 0 0 0 0 0 0 0 0 0 ...
 $ se.AXsi            : num [1:20, 1:2] 0 0 0 0 0 0 0 0 0 0 ...
 $ nstud              : int 500
 $ resp.ind.list      :List of 20
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : int [1:500] 1 2 3 4 5 6 7 8 9 10 ...
 $ hwt                : num [1:500, 1:21] 9.68e-18 1.44e-15 8.36e-33 5.40e-48 5.40e-48 ...
 $ like               : num [1:500, 1:21] 1.89e-15 6.49e-12 6.61e-30 8.28e-43 8.21e-44 ...
 $ ndim               : num 1
 $ xsi.fixed          : NULL
 $ xsi.fixed.estimated: num [1:20, 1:2] 1 2 3 4 5 6 7 8 9 10 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:20] "I1" "I2" "I3" "I4" ...
  .. ..$ : chr [1:2] "" "xsi"
 $ B.fixed.estimated  : num [1:40, 1:4] 1 1 2 2 3 3 4 4 5 5 ...
 $ beta.fixed         : num [1, 1:3] 1 1 0
 $ Q                  : NULL
 $ variance.fixed     : NULL
 $ nnodes             : num 21
 $ deviance           : num 10979
 $ ic                 :'data.frame':    1 obs. of  19 variables:
  ..$ n        : num 500
  ..$ deviance : num 10979
  ..$ loglike  : num -5489
  ..$ logprior : num 0
  ..$ logpost  : num -5489
  ..$ Nparsxsi : int 20
  ..$ NparsB   : num 0
  ..$ Nparsbeta: int 0
  ..$ Nparscov : num 1
  ..$ np       : num 21
  ..$ Npars    : num 21
  ..$ ghp_obs  : num 10000
  ..$ AIC      : num 11021
  ..$ AIC3     : num 11042
  ..$ BIC      : num 11109
  ..$ aBIC     : num 11043
  ..$ CAIC     : num 11130
  ..$ AICc     : num 11023
  ..$ GHP      : num 0.551
 $ thetasamp.density  : NULL
 $ deviance.history   : num [1:13, 1:2] 1 2 3 4 5 6 7 8 9 10 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "iter" "deviance"
 $ control            :List of 19
  ..$ nodes                 : num [1:21] -6 -5.4 -4.8 -4.2 -3.6 ...
  ..$ snodes                : num 0
  ..$ QMC                   : logi TRUE
  ..$ convD                 : num 0.001
  ..$ conv                  : num 1e-04
  ..$ convM                 : num 1e-04
  ..$ Msteps                : num 4
  ..$ maxiter               : num 1000
  ..$ max.increment         : num 1
  ..$ min.variance          : num 0.001
  ..$ progress              : logi FALSE
  ..$ ridge                 : num 0
  ..$ xsi.start0            : logi FALSE
  ..$ increment.factor      : num 1
  ..$ fac.oldxsi            : num 0
  ..$ acceleration          : chr "none"
  ..$ dev_crit              : chr "absolute"
  ..$ trim_increment        : chr "half"
  ..$ mstep_intercept_method: chr "R"
 $ irtmodel           : chr "1PL"
 $ iter               : num 13
 $ printxsi           : logi FALSE
 $ YSD                : logi FALSE
 $ CALL               : language tam.mml(resp = resp, verbose = FALSE)
 $ latreg_stand       : NULL
 $ prior_list_xsi     : list()
  ..- attr(*, "dim_parameter")= int 20
  ..- attr(*, "is_prior")= logi FALSE
  ..- attr(*, "length_prior_entries")= int 0
 $ penalty_xsi        : num 0
 - attr(*, "class")= chr "tam.mml"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Lösung
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  <span class="st">"b_true"</span> <span class="op">=</span> <span class="va">item_pars</span><span class="op">$</span><span class="va">beta</span>,</span>
<span>  <span class="st">"b_est"</span> <span class="op">=</span> <span class="va">tam_1PL</span><span class="op">$</span><span class="va">item_irt</span><span class="op">[</span>, <span class="st">"beta"</span><span class="op">]</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>b_diff <span class="op">=</span> <span class="va">b_est</span> <span class="op">-</span> <span class="va">b_true</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Plotten der Differenz zwischen geschätzten und echten Parametern gegen die echten Parameter</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">result</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">b_true</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">b_diff</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#F4BA02"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bg</span><span class="op">(</span><span class="op">)</span> </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="power_simulation_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Wir können vor allem anhand des Plots gut erkennen, dass die Differenz zwischen den wahren und den geschätzten Werten an den Rändern zunimmt. Besonders schwere oder besonders leichte Items werden also schlechter geschätzt. Das ist ganz normal, da dies Items relativ wenig Informationen enthalten: Entweder benantworten (fast) alle sie richtig oder (fast) alle sie falsch. Es gibt hier also wenig Variation, die für die Schätzung genutzt werden kann.</p>
</div>
</div>
</div>
<p>Im nächsten Schritt packen wir das alles in einen loop.</p>



</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/nickhaf\.github\.io\/IRT_workshop\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../../exercises/index_simulation.html" class="pagination-link" aria-label="Simulation zur Stichprobenplanung">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Simulation zur Stichprobenplanung</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../exercises/simulation/loop.html" class="pagination-link" aria-label="Stichprobenplanung durch Simulation: for-loop">
        <span class="nav-page-text">Stichprobenplanung durch Simulation: for-loop</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>